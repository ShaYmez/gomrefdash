import{c as q,h as k,e as _,R as Q}from"./QBtn.1c52f242.js";import{u as B,a as C,Q as L,b as w,c as $,d as D,e as M}from"./compiler-core.esm-bundler.1a920683.js";import{c as S,h as I,g as z,_ as P,A as R,r as T,B as c,Q as h,G as t,F as r,D as o,I as v,R as f,S as m,H as n,C as x,w as j}from"./index.6693244e.js";import{a as p,l as N,i as V}from"./axios.df14c455.js";var y=q({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:l}){const a=S(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>I(e.tag,{class:a.value},k(l.default))}}),b=q({name:"QCard",props:{...B,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:l}){const{proxy:{$q:a}}=z(),i=C(e,a),d=S(()=>"q-card"+(i.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>I(e.tag,{class:d.value},k(l.default))}});const A=R({data(){return{name:"M17 Dashboard",station_rows:[],modules:[],pagination:T({rowsPerPage:0}),intervalId:null}},mounted(){this.fetchMetadata(),this.fetchStationsList(),this.intervalId=setInterval(()=>{this.fetchStationsList()},2e4)},beforeRouteLeave(e,l,a){clearInterval(this.intervalId),a()},methods:{fetchMetadata(){let e="/json/metadata";p.get(e).then(l=>{this.metadata=l.data}).catch(l=>{console.error(l)})},fetchStationsList(){let e="/json/stations";p.get(e).then(a=>{let i=a.data;i.stations.forEach(function(d,u){d.id=u+1,d.lastheardlocal=N(d.lastheard),d.txactive=V(d.lastheard),i.stations[u]=d}),this.station_rows=i.stations}).catch(a=>{console.error(a)});let l="/json/modulesinuse";p.get(l).then(a=>{this.modules=a.data}).catch(a=>{console.error(a)})}}}),E={class:"q-pa-sm"},F={class:"row"},H={class:"col-xs-12 col-sm-10 col-md-8"},G={class:"q-pa-md"},O=t("th",{class:"gt-xs text-left",style:{"max-width":"50px"}},"#",-1),U={class:"text-right",style:{"max-width":"150px"}},J=t("th",{class:"gt-xs text-left",style:{"max-width":"50px"}},"Suf",-1),K=t("th",{class:"gt-xs text-left",style:{"max-width":"100px"}},"Link/Peer",-1),W=t("th",{class:"text-left",style:{"max-width":"50px"}},"Mod",-1),X=t("th",{class:"text-left",style:{"max-width":"150px"}},"Last Heard",-1),Y={class:"gt-xs text-left",style:{"max-width":"50px"}},Z={class:"text-right",style:{"max-width":"150px"}},tt={class:"gt-xs text-left",style:{"max-width":"50px"}},et={class:"gt-xs text-left",style:{"max-width":"100px"}},st={class:"text-left",style:{"max-width":"50px"}},at={class:"text-left",style:{"max-width":"150px"}},lt={class:"col-xs-12 col-sm-5 col-md-4"},ot={class:"q-pa-sm"},rt=t("div",{align:"center"},"Modules In Use",-1),dt={class:"q-pa-sm"},ct={class:"row"},nt={class:"text-h6"};function it(e,l,a,i,d,u){return c(),h("div",E,[t("div",F,[t("div",H,[t("div",G,[r(L,null,{default:o(()=>[t("thead",null,[t("tr",null,[O,t("th",U,[r(_,{flat:""},{default:o(()=>[v("Callsign")]),_:1})]),J,K,W,X])]),t("tbody",null,[(c(!0),h(f,null,m(e.station_rows,s=>(c(),h("tr",{key:s},[t("td",Y,n(s.id),1),t("td",Z,[s.txactive==!0?(c(),x(_,{key:0,color:"red","text-color":"white",label:s.callsign,href:`https://www.qrz.com/db/${s.callsign}`,target:"_blank"},null,8,["label","href"])):(c(),x(_,{key:1,flat:"",label:s.callsign,href:`https://www.qrz.com/db/${s.callsign}`,target:"_blank"},null,8,["label","href"]))]),t("td",tt,n(s.callsignsuffix),1),t("td",et,n(s.vianode),1),t("td",st,n(s.onmodule),1),t("td",at,n(s.lastheardlocal),1)]))),128))])]),_:1})])]),t("div",lt,[t("div",ot,[r(b,null,{default:o(()=>[r(y,null,{default:o(()=>[rt,t("div",dt,[t("div",ct,[(c(!0),h(f,null,m(e.modules,s=>(c(),h("div",{class:"col-6 q-pa-sm",key:s.name},[r(b,{class:"mycard"},{default:o(()=>[r(y,null,{default:o(()=>[r(w,{header:"",align:"center"},{default:o(()=>[t("div",nt,n(s.name),1)]),_:2},1024),r(w,{align:"center"},{default:o(()=>[r($,{bordered:"",separator:""},{default:o(()=>[(c(!0),h(f,null,m(s.callsigns,g=>j((c(),x(D,{clickable:"",key:g},{default:o(()=>[r(M,null,{default:o(()=>[v(n(g),1)]),_:2},1024)]),_:2},1024)),[[Q]])),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128))])])]),_:1})]),_:1})])])])])}var mt=P(A,[["render",it]]);export{mt as default};
