import{c as b,h as q,e as g,R as I}from"./QBtn.cdf584f9.js";import{u as Q,a as B,l as C,i as L,Q as $,b as w,c as D,d as M,e as z}from"./compiler-core.esm-bundler.ef030594.js";import{c as k,h as S,g as P,_ as R,A as T,r as j,B as d,Q as h,G as t,F as c,D as r,R as _,S as f,H as n,C as m,w as N,I as V}from"./index.3c92ec43.js";import{a as x}from"./axios.30238dbd.js";var v=b({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:l}){const s=k(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>S(e.tag,{class:s.value},q(l.default))}}),y=b({name:"QCard",props:{...Q,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:l}){const{proxy:{$q:s}}=P(),i=B(e,s),o=k(()=>"q-card"+(i.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>S(e.tag,{class:o.value},q(l.default))}});const A=T({data(){return{name:"M17 Dashboard",station_rows:[],modules:[],pagination:j({rowsPerPage:0}),intervalId:null}},mounted(){this.fetchMetadata(),this.fetchStationsList(),this.intervalId=setInterval(()=>{this.fetchStationsList()},2e4)},beforeRouteLeave(e,l,s){clearInterval(this.intervalId),s()},methods:{fetchMetadata(){let e="/json/metadata";x.get(e).then(l=>{this.metadata=l.data}).catch(l=>{console.error(l)})},fetchStationsList(){let e="/json/stations";x.get(e).then(s=>{let i=s.data;i.stations.forEach(function(o,u){o.id=u+1,o.lastheardlocal=C(o.lastheard),o.txactive=L(o.lastheard),i.stations[u]=o}),this.station_rows=i.stations}).catch(s=>{console.error(s)});let l="/json/modulesinuse";x.get(l).then(s=>{this.modules=s.data}).catch(s=>{console.error(s)})}}}),E={class:"q-pa-sm"},F={class:"row"},H={class:"col-xs-12 col-sm-10 col-md-8"},G={class:"q-pa-md"},O=t("thead",null,[t("tr",null,[t("th",{class:"gt-xs text-left",style:{"max-width":"50px"}},"#"),t("th",{class:"text-left",style:{"max-width":"150px"}},"Callsign"),t("th",{class:"gt-xs text-left",style:{"max-width":"50px"}},"Suf"),t("th",{class:"gt-xs text-left",style:{"max-width":"100px"}},"Link/Peer"),t("th",{class:"text-left",style:{"max-width":"50px"}},"Mod"),t("th",{class:"text-left",style:{"max-width":"150px"}},"Last Heard")])],-1),U={class:"gt-xs text-left",style:{"max-width":"50px"}},J={class:"text-right",style:{"max-width":"150px"}},K={class:"gt-xs text-left",style:{"max-width":"50px"}},W={class:"gt-xs text-left",style:{"max-width":"100px"}},X={class:"text-left",style:{"max-width":"50px"}},Y={class:"text-left",style:{"max-width":"150px"}},Z={class:"col-xs-12 col-sm-5 col-md-4"},tt={class:"q-pa-sm"},et=t("div",{align:"center"},"Modules In Use",-1),at={class:"q-pa-sm"},st={class:"row"},lt={class:"text-h6"};function rt(e,l,s,i,o,u){return d(),h("div",E,[t("div",F,[t("div",H,[t("div",G,[c($,null,{default:r(()=>[O,t("tbody",null,[(d(!0),h(_,null,f(e.station_rows,a=>(d(),h("tr",{key:a},[t("td",U,n(a.id),1),t("td",J,[a.txactive==!0?(d(),m(g,{key:0,color:"red","text-color":"white",label:a.callsign,href:`https://www.qrz.com/db/${a.callsign}`,target:"_blank"},null,8,["label","href"])):(d(),m(g,{key:1,flat:"",label:a.callsign,href:`https://www.qrz.com/db/${a.callsign}`,target:"_blank"},null,8,["label","href"]))]),t("td",K,n(a.callsignsuffix),1),t("td",W,n(a.vianode),1),t("td",X,n(a.onmodule),1),t("td",Y,n(a.lastheardlocal),1)]))),128))])]),_:1})])]),t("div",Z,[t("div",tt,[c(y,null,{default:r(()=>[c(v,null,{default:r(()=>[et,t("div",at,[t("div",st,[(d(!0),h(_,null,f(e.modules,a=>(d(),h("div",{class:"col-6 q-pa-sm",key:a.name},[c(y,{class:"mycard"},{default:r(()=>[c(v,null,{default:r(()=>[c(w,{header:"",align:"center"},{default:r(()=>[t("div",lt,n(a.name),1)]),_:2},1024),c(w,{align:"center"},{default:r(()=>[c(D,{bordered:"",separator:""},{default:r(()=>[(d(!0),h(_,null,f(a.callsigns,p=>N((d(),m(M,{clickable:"",key:p},{default:r(()=>[c(z,null,{default:r(()=>[V(n(p),1)]),_:2},1024)]),_:2},1024)),[[I]])),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128))])])]),_:1})]),_:1})])])])])}var it=R(A,[["render",rt]]);export{it as default};
