import{c as k,h as b,e as _,R as Q}from"./QBtn.5ce1fc4e.js";import{u as B,a as C,Q as L,b as w,c as $,d as D,e as M}from"./compiler-core.esm-bundler.67913ccf.js";import{c as S,h as I,g as z,_ as P,A as R,r as T,B as c,Q as h,G as t,F as r,D as l,I as v,R as x,S as m,H as n,C as f,w as j}from"./index.269c90d0.js";import{a as p,l as F,i as N}from"./axios.df14c455.js";var y=k({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:o}){const a=S(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>I(e.tag,{class:a.value},b(o.default))}}),q=k({name:"QCard",props:{...B,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:o}){const{proxy:{$q:a}}=z(),i=C(e,a),d=S(()=>"q-card"+(i.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>I(e.tag,{class:d.value},b(o.default))}});const V=R({data(){return{name:"M17 Dashboard",station_rows:[],modules:[],pagination:T({rowsPerPage:0}),intervalId:null}},mounted(){this.fetchMetadata(),this.fetchStationsList(),this.intervalId=setInterval(()=>{this.fetchStationsList()},2e4)},beforeRouteLeave(e,o,a){clearInterval(this.intervalId),a()},methods:{fetchMetadata(){let e="/json/metadata";p.get(e).then(o=>{this.metadata=o.data}).catch(o=>{console.error(o)})},fetchStationsList(){let e="/json/stations";p.get(e).then(a=>{let i=a.data;i.stations.forEach(function(d,u){d.id=u+1,d.lastheardlocal=F(d.lastheard),d.txactive=N(d.lastheard),i.stations[u]=d}),this.station_rows=i.stations}).catch(a=>{console.error(a)});let o="/json/modulesinuse";p.get(o).then(a=>{this.modules=a.data}).catch(a=>{console.error(a)})}}}),A={class:"q-pa-sm"},E={class:"row"},H={class:"col-xs-12 col-sm-10 col-md-8"},G={class:"q-pa-md"},O=t("th",{class:"gt-xs text-right",style:{"max-width":"50px"}},"#",-1),U=t("th",{class:"text-center",style:{"max-width":"50px"}},"Flag",-1),J={class:"text-center",style:{"max-width":"150px"}},K=t("th",{class:"gt-xs text-left",style:{"max-width":"50px"}},"Suf",-1),W=t("th",{class:"gt-xs text-left",style:{"max-width":"100px"}},"Link/Peer",-1),X=t("th",{class:"text-left",style:{"max-width":"50px"}},"Mod",-1),Y=t("th",{class:"text-left",style:{"max-width":"150px"}},"Last Heard",-1),Z={class:"gt-xs text-right",style:{"max-width":"50px"}},tt={class:"text-center",style:{"max-width":"50px"}},et=["src"],st={class:"text-center",style:{"max-width":"150px"}},at={class:"gt-xs text-left",style:{"max-width":"50px"}},lt={class:"gt-xs text-left",style:{"max-width":"100px"}},ot={class:"text-left",style:{"max-width":"50px"}},rt={class:"text-left",style:{"max-width":"150px"}},dt={class:"col-xs-12 col-sm-5 col-md-4"},ct={class:"q-pa-sm"},nt=t("div",{align:"center"},"Modules In Use",-1),it={class:"q-pa-sm"},ht={class:"row"},ut={class:"text-h6"};function _t(e,o,a,i,d,u){return c(),h("div",A,[t("div",E,[t("div",H,[t("div",G,[r(L,null,{default:l(()=>[t("thead",null,[t("tr",null,[O,U,t("th",J,[r(_,{flat:"","no-caps":""},{default:l(()=>[v("Callsign")]),_:1})]),K,W,X,Y])]),t("tbody",null,[(c(!0),h(x,null,m(e.station_rows,s=>(c(),h("tr",{key:s},[t("td",Z,n(s.id),1),t("td",tt,[t("img",{width:"30",src:`flags/${s.country.countrycode}.png`},null,8,et)]),t("td",st,[s.txactive==!0?(c(),f(_,{key:0,"icon-right":"campaign",color:"red","text-color":"white",href:`https://www.qrz.com/db/${s.callsign}`,target:"_blank"},{default:l(()=>[t("u",null,n(s.callsign),1)]),_:2},1032,["href"])):(c(),f(_,{key:1,flat:"",href:`https://www.qrz.com/db/${s.callsign}`,target:"_blank"},{default:l(()=>[t("u",null,n(s.callsign),1)]),_:2},1032,["href"]))]),t("td",at,n(s.callsignsuffix),1),t("td",lt,n(s.vianode),1),t("td",ot,n(s.onmodule),1),t("td",rt,n(s.lastheardlocal),1)]))),128))])]),_:1})])]),t("div",dt,[t("div",ct,[r(q,null,{default:l(()=>[r(y,null,{default:l(()=>[nt,t("div",it,[t("div",ht,[(c(!0),h(x,null,m(e.modules,s=>(c(),h("div",{class:"col-6 q-pa-sm",key:s.name},[r(q,{class:"mycard"},{default:l(()=>[r(y,null,{default:l(()=>[r(w,{header:"",align:"center"},{default:l(()=>[t("div",ut,n(s.name),1)]),_:2},1024),r(w,{align:"center"},{default:l(()=>[r($,{bordered:"",separator:""},{default:l(()=>[(c(!0),h(x,null,m(s.callsigns,g=>j((c(),f(D,{clickable:"",key:g},{default:l(()=>[r(M,null,{default:l(()=>[v(n(g),1)]),_:2},1024)]),_:2},1024)),[[Q]])),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128))])])]),_:1})]),_:1})])])])])}var gt=P(V,[["render",_t]]);export{gt as default};
