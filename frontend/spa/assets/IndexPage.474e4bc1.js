import{u as I,a as Q,l as C,Q as B,b as h,c as L,d as x,e as y}from"./compiler-core.esm-bundler.06a65a8b.js";import{c as q,h as w,R as D}from"./QBtn.c0821753.js";import{c as k,h as S,g as P,_ as $,A as M,r as R,B as d,P as c,G as l,F as s,D as o,Q as _,R as p,H as g,w as j,C as z,S as N}from"./index.18557048.js";import{f as m}from"./axios.50292f41.js";var v=q({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(a,{slots:t}){const e=k(()=>`q-card__section q-card__section--${a.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>S(a.tag,{class:e.value},w(t.default))}}),b=q({name:"QCard",props:{...I,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(a,{slots:t}){const{proxy:{$q:e}}=P(),n=Q(a,e),r=k(()=>"q-card"+(n.value===!0?" q-card--dark q-dark":"")+(a.bordered===!0?" q-card--bordered":"")+(a.square===!0?" q-card--square no-border-radius":"")+(a.flat===!0?" q-card--flat no-shadow":""));return()=>S(a.tag,{class:r.value},w(t.default))}});const T=[{name:"id",align:"right",label:"#",field:"id",sortable:!0},{name:"callsign",label:"Callsign",field:"callsign",sortable:!0},{name:"callsignsuffix",label:"Suffix",field:"callsignsuffix",sortable:!1},{name:"vianode",label:"Link/Peer",field:"vianode",sortable:!0},{name:"onmodule",label:"Module",field:"onmodule",sortable:!0},{name:"lastheardlocal",label:"Last Heard",field:"lastheardlocal",sortable:!0}],V=M({data(){return{name:"M17 Dashboard",station_columns:T,station_rows:[],modules:[],pagination:R({rowsPerPage:0}),intervalId:null}},mounted(){this.fetchMetadata(),this.fetchStationsList(),this.intervalId=setInterval(()=>{this.fetchStationsList()},2e4)},beforeRouteLeave(a,t,e){clearInterval(this.intervalId),e()},methods:{fetchMetadata(){let a="/json/metadata";m.get(a).then(t=>{this.metadata=t.data}).catch(t=>{console.error(t)})},fetchStationsList(){let a="/json/stations";m.get(a).then(e=>{let n=e.data;n.stations.forEach(function(r,u){r.id=u+1,r.lastheardlocal=C(r.lastheard),n.stations[u]=r}),this.station_rows=n.stations}).catch(e=>{console.error(e)});let t="/json/modulesinuse";m.get(t).then(e=>{this.modules=e.data}).catch(e=>{console.error(e)})}}}),E={class:"q-pa-sm"},F={class:"row"},H={class:"col-xs-12 col-md-8"},U={class:"q-pa-md"},A={class:"col-xs-12 col-md-4"},G={class:"q-pa-sm"},J=l("div",{align:"center"},"Modules In Use",-1),K={class:"q-pa-sm"},O={class:"row"},W={class:"text-h6"};function X(a,t,e,n,r,u){return d(),c("div",E,[l("div",F,[l("div",H,[l("div",U,[s(B,{rows:a.station_rows,columns:a.station_columns,"row-key":"name","virtual-scroll":"",pagination:a.pagination,"onUpdate:pagination":t[0]||(t[0]=i=>a.pagination=i),"rows-per-page-options":[0]},null,8,["rows","columns","pagination"])])]),l("div",A,[l("div",G,[s(b,null,{default:o(()=>[s(v,null,{default:o(()=>[J,l("div",K,[l("div",O,[(d(!0),c(_,null,p(a.modules,i=>(d(),c("div",{class:"col-6 q-pa-sm",key:i.name},[s(b,{class:"mycard"},{default:o(()=>[s(v,null,{default:o(()=>[s(h,{header:"",align:"center"},{default:o(()=>[l("div",W,g(i.name),1)]),_:2},1024),s(h,{align:"center"},{default:o(()=>[s(L,{bordered:"",separator:""},{default:o(()=>[(d(!0),c(_,null,p(i.callsigns,f=>j((d(),z(x,{clickable:"",key:f},{default:o(()=>[s(y,null,{default:o(()=>[N(g(f),1)]),_:2},1024)]),_:2},1024)),[[D]])),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]))),128))])])]),_:1})]),_:1})])])])])}var ta=$(V,[["render",X]]);export{ta as default};
